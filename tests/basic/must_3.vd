//> output "+=--"

import std/core;
import std/string;
import std/io;

struct Foo {
	func constructor(this: &&Foo) {
		print("+");
	}

	func constructor(this: &&Foo, other: Foo) {
		print("=");
	}

	func destructor(this: &&Foo) {
		print("-");
	}

	func hasValue(this: Foo) -> bool {
		return true;
	}

	func value(this: Foo) -> int {
		return 42;
	}

	func error(this: Foo) -> Error {
		return Error::EINVAL;
	}
}

func bar() -> int {
	return must Foo();
}

func main() {
	assert(bar() == 42);
	println("");
}
